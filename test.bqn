#! /usr/bin/env dbqn
"Usage: ./test.bqn path/to/mlochbaum/BQN [-qsmev] name | ./BQN"!2â‰¤â‰ â€¢args
pathâ†âŠ‘â€¢args
argsâ†1â†“â€¢args
optâ†""
{ğ•Š: optâ†©ğ•© â‹„ argsâ†“Ëœâ†©1}âŸ('-'â‰¡âŠ‘) âŠ‘args

"Missing argument!"!1=â‰ args
caseâ†âŠ‘args
caseâˆ¾â†©".bqn"
tests â† â€¢FLines pathâˆ¾"/test/cases/"âˆ¾case
tests/Ëœâ†© (('#'â‰¢âŠ‘)âˆ§0<â‰ )Â¨tests
{ğ•Š: tests/Ëœâ†©'!'â‰ âŠ‘Â¨tests}âŸâŠ‘ 's'âˆŠopt
{ğ•Š: tests/Ëœâ†©'!'=âŠ‘Â¨tests}âŸâŠ‘ 'e'âˆŠopt
Q â† {
  iâ†âŠ‘ğ•©âŠ'%'
  (('!'â‰ âŠ‘ğ•©)âˆ§âŠ‘'v'âˆŠopt)â—¶âŸ¨(1+i)âŠ¸â†“ â‹„ {âˆ¾âŸ¨"(" â‹„ iâ†‘ğ•© â‹„ ") â‰¡ {" â‹„ (âŠâŸœ'#'âŠ‘âŠ¸â†‘âŠ¢) (1+i)â†“ğ•© â‹„ " }"âŸ©}âŸ© ğ•©
}
Out â† {â€¢Out'%'âŠ¸âˆŠâ—¶âŠ¢â€¿Qğ•©}

((âŠ‘'m'âˆŠopt)âŠ‘Outâ€¿{â€¢Showğ•©â‹„Outğ•©})Â¨tests
# ('%'âŠ¸âˆŠâˆ¨ '#'= Â·âŠ‘ âˆ¾âŸœ"#")â—¶â€¢Outâ€¿@Â¨tests
â€¢OutâŸ(Â¬âŠ‘'q'âˆŠopt) """finished"""
â€¢OutâŸ(Â¬âŠ‘'q'âˆŠopt) ""