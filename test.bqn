#! /usr/bin/env dbqn
"usage: test.bqn path/to/mlochbaum/BQN ""$PATH"" [optional expressions to evaluate]"!2â‰¤â‰ â€¢args
pathâ†0âŠ‘â€¢args
envPâ†1âŠ‘â€¢args

tests â† â€¢FLines pathâˆ¾"/test/cases/prim.bqn"
# tests â† â€¢FLines pathâˆ¾"/test/cases/identity.bqn"
# tests â† â€¢FLines pathâˆ¾"/test/cases/under.bqn"
# tests â† â€¢FLines pathâˆ¾"/test/cases/fill.bqn"
# tests â† â€¢FLines "primLeft.bqn"
{testsâ†©ğ•©}âŸ(Ã—â‰ ) 2â†“â€¢args

('#'â‰  Â·âŠ‘ âˆ¾âŸœ"#")â—¶@â€¿{
  '%'âŠ¸âˆŠâ—¶{ğ•¤
    â€¢Out ğ•©
    "src/interp" â€¢FChars âŸ¨1,path,ğ•©âŸ© â€¢Import "cc.bqn"
    (Ã—âŠ‘)â—¶@â€¿{ğ•¤â‹„â€¢Out "############ Failed to compile! ############" â‹„ â€¢OutÂ¨1â†“ğ•©}{envâ‡<"PATH="âˆ¾envP}â€¢SH"./debugBuild"
    codeâ€¿outâ€¿errâ†â€¢SH"./BQN"
    â€¢Out out
    {ğ•¤â‹„â€¢Out"exit code "âˆ¾(â•code) â‹„ â€¢Out err}âŸ(Ã—code) err
  }â€¿{ğ•¤
    # â€¢Out ğ•©
    # "src/interp" â€¢FChars âŸ¨1,path,3â†“ğ•©âŸ© â€¢Import "cc.bqn"
    # (Ã—âŠ‘)â—¶@â€¿{ğ•¤â‹„â€¢Out "############ Failed to compile! ############" â‹„ â€¢OutÂ¨1â†“ğ•©}{envâ‡<"PATH="âˆ¾envP}â€¢SH"./debugBuild"
    # codeâ€¿outâ€¿errâ†â€¢SH"./BQN"
    # â€¢Out out
    # {ğ•¤â‹„â€¢Out"exit code "âˆ¾(â•code) â‹„ â€¢Out err}âŸ(Ã—code) err
  }
}Â¨tests