# make f='-O3 -march=native -DTEST_BITCPY' singeli=1 c && ./BQN test/bitcpy.bqn
âŸ¨Temp, Type, Unshare, Squeeze, Info, VariationâŸ© â† â€¢internal
u â† âŒŠ100Ã—(â€¢UnixTime+1|100Ã—â€¢MonoTime)@
# u â†© 123

r â† â€¢MakeRand â€¢Show u


Do â† { ğ•Š:
  al â† 1+r.Range 500
  a â† al r.Range 2
  aT â† "Ai32" Variation a
  ! a â‰¡ aT
  ! "bitarr" â‰¡ Type a
  b â† al r.Range 2
  ! "bitarr" â‰¡ Type b
  { ğ•Š:
    bl â† r.Range 1+al
    as â† r.Range 1+al-bl
    bs â† r.Range 1+al-bl
    i â† â†•bl
    exp â† ((bs+i)âŠb)âŒ¾((as+i)âŠ¸âŠ) a
    aC â† Unshare a
    Temp âŸ¨aC, as, b, bs, blâŸ©
    aC â‰¢ exp?
      â€¢Out "Fail:"
      F â† {(Â¬ Â·âˆ§`âŒ¾âŒ½ ' 'âŠ¸=)âŠ¸/ â¥Š' 'âˆ¾Ë˜Ëœ â†‘â€¿64â¥Š '0'+ğ•©}
      â€¢Out "Exp: "âˆ¾F exp
      â€¢Out "Got: "âˆ¾F aC
      â€¢Out "Inputs:"
      â€¢Out "r:   "âˆ¾F a
      â€¢Out "rs:  "âˆ¾â€¢Repr as
      â€¢Out "x:   "âˆ¾F b
      â€¢Out "xs:  "âˆ¾â€¢Repr bs
      â€¢Out "l:   "âˆ¾â€¢Repr bl
      â€¢Exit 1
    ;0
  }âˆ˜@âŸ500 @
  ! a â‰¡ aT
}

@âˆ˜DoâŸ(âŠ‘(â€¢BQNÂ¨â€¢args)âˆ¾2000) @