# note: tests only bit/i8/i16/i32 arrays; no f64/c8/c16/c32/generic array tests
u â† âŒŠ100Ã—(â€¢UnixTime+1|100Ã—â€¢MonoTime)@
R â† (â€¢MakeRand â€¢Show u).Range

M â† (2â‹†32)âŠ¸Ã—âŠ¸+Â´
Test â† { ğ•Š:
  width â† 1â€¿8â€¿16â€¿32âŠ‘ËœR 4
  count â† 1+R (width=1)âŠ‘32â€¿256
  data â† (widthÃ—count) R 2
  n â† 1+R count
  cast â† {width=1? âŠ¢; âŸ¨1â‹„widthâ€¿'i'âŸ© â€¢bit._cast}
  iota â† â†•â‰ data
  shifts â† â†•1+count-n
  exp â† >(-shifts)(width/âŒ½)Â¨<n>â†•count
  got â† >1â†“Â¨âˆŠÂ¨<Ë˜â‰>{
    a â† Cast dataâ‰ ğ•©â‰ iota
    shifts (Mâˆ˜â€¢Hash nâ†‘â†“)Â¨ <a
  }Â¨Â¯1âˆ¾iota
  +Â´âˆ˜â¥ŠÂ¨ exp(>â‹ˆ<)got
}

fails â† 0â€¿0
{ğ•Š: fails+â†© Test@}Â¨â†•1000
â€¢Out âˆ¾âŸ¨"Collisions: " â‹„ â€¢Repr 0âŠ‘fails â‹„ " (expected 0, assuming no actual hash collisions)"âŸ©
â€¢Out âˆ¾âŸ¨"Mismatches: " â‹„ â€¢Repr 1âŠ‘fails â‹„ " (expected 0)"âŸ©
