u â† âŒŠ100Ã—(â€¢UnixTime+1|100Ã—â€¢MonoTime)@

Range â† (â€¢MakeRand â€¢Show u).Range

ExpectedRangeStep â† { nâ€¿lenğ•Šdepthâ€¿max:
  ls â† {ğ•Š:len Range max}Â¨â†•n
  maxGot â† âŒˆÂ´âŒˆÂ´Â¨ls
  ! maxGot<maxâŒˆ1
  {ğ•Š: ! 0<âŒŠÂ´âŒŠÂ´Â¨ls}âŸâŠ¢ max=0
  {(max=0) âˆ¨ (max>nÃ—lenÃ·20) âˆ¨ maxGot=max-1? @; â€¢Out âˆ¾âŸ¨"Maximum ", â€¢Repr max-1, " likely should have been encountered, but max was ", â€¢Repr maxGot, "; n=", â€¢Repr n," len=", â€¢Repr len, " range=", â€¢Repr maxâŸ©}
  
  # some very very crappy statistics
  sumExp â† nÃ—lenÃ·2
  sumGot â† +Â´ +Â´Â¨ ls
  {ğ•Š: sumGot â†© maxÃ·Ëœ (2Ã·ËœnÃ—len) + sumGot}âŸâŠ¢ maxâ‰ 0
  diff â† sumGot-sumExp
  dev â† diff Ã· âˆš12Ã·Ëœ nÃ—len
  {ğ•Š:
    depthâ‰¥4? â€¢Out âˆ¾âŸ¨"Unlikely sum (dev=", â€¢Repr dev, ": expected ", â€¢Repr sumExp, ", got ", â€¢Repr sumGot, "; n=", â€¢Repr n," len=", â€¢Repr len, " range=", â€¢Repr maxâŸ©;
    nâ€¿len ExpectedRangeStep âŸ¨depth+1, maxâŸ©
  }âŸâŠ¢ 2 < |dev
  dev
}

ExpectedRange â† ExpectedRangeStepâŸœ(0âŠ¸â‹ˆ)

# for whatever reason, the following don't all evaluate to the same number; but they're close enough so Â¯\_(ãƒ„)_/Â¯
# â€¢Show (+Â´Ã·â‰ ) |{ğ•Š: 100â€¿1000 ExpectedRange 2  }Â¨â†•10000
# â€¢Show (+Â´Ã·â‰ ) |{ğ•Š:  10â€¿1000 ExpectedRange 3  }Â¨â†•10000
# â€¢Show (+Â´Ã·â‰ ) |{ğ•Š:  10â€¿1000 ExpectedRange 1e3}Â¨â†•10000
# â€¢Show (+Â´Ã·â‰ ) |{ğ•Š:  10â€¿1000 ExpectedRange 1e6}Â¨â†•10000

am â† 10000
â€¢Out "general"
(100â€¿128âˆ¾Ëœâ†•20) {(âŒŠ(10Ã—am)Ã·ğ•¨âŒˆ1)â€¿ğ•¨ ExpectedRange ğ•©}âŒœ 3â€¿10â€¿100â€¿1000â€¿10000â€¿100000â€¿1e8â€¿1e15âˆ¾2â‹†2â†“â†•34
(â†•10) {! âˆ§Â´0=ğ•© Range 1}âŒœ â†•200

â€¢Out "bit boolean"
{âŸ¨5Ã—am,ğ•©âŸ© ExpectedRange 2}Â¨ â¥Š31â€¿32â€¿33Ã—âŒœâ†•100
â€¢Out "float"
{âŸ¨2Ã—am,ğ•©âŸ© ExpectedRange 0}Â¨ â†•100
