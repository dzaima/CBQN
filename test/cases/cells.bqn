%DEF var Vâ†â€¢internal.Variation â‹„ LVâ†â€¢internal.ListVariations â‹„ CLRâ†â€¢internal.ClearRefs
%DEF tvar %USE var â‹„ _tvar â† {F _ğ•£ x: (CLR@) âŠ¢ {F ğ•© V x}Â¨ LV ğ•©; w F _ğ•£ x: (CLR@) âŠ¢ (LV ğ•¨) {(ğ•¨ V w) F ğ•© V x}âŒœ LV ğ•©}
%DEF eqvar LVâ†â€¢internal.ListVariations â‹„ âŸ¨_eqvar0_âŸ©â†âŠ‘â€¢args â‹„ _eqvar â† {ğ”½ _eqvar0_ LV}
%DEF evar %USE tvar â‹„ _evar â† {okâ†{â‡} â‹„ râ†â¥Šğ•¨ okâˆ˜ğ”½âŠ{ğ•Š: â€¢CurrentError@} _tvar ğ•© â‹„ {âŠ‘okâˆŠr? !"TEST FAIL: variation didn't error"; ("TEST FAIL: varying error messages"âŠ¸â‹ˆ ! 1=â‰ )â·r â‹„ (âŠ‘r)!0}}
%DEF eqerr %USE eqvar â‹„ _eqerr â† {okâ†{â‡} â‹„ râ†â¥Šğ•¨ okâˆ˜ğ”½âŠ{ğ•Š: â€¢CurrentError@}âŒœ ğ•© â‹„ {âŠ‘okâˆŠr? !"TEST FAIL: case didn't error"; ("TEST FAIL: varying error messages"âŠ¸â‹ˆ ! 1=â‰ )â·r â‹„ (âŠ‘r)!0}}
%DEF k _k â† {ğ”½â—‹â€¢internal.Keep}
%DEF pk _pk â† {ğ”½â—‹â€¢internal.PureKeep}

1â€¿2 1â‰0 1 %% 1â€¿1
1 1â‰0 1â€¿2 %% 1â€¿1
! 20â€¿1200â‰¡â‰¢â¥ŠË˜aâ†20â€¿30â€¿40â¥Šâ†•24 â‹„ ! 20â€¿30â€¿40 â‰¡ â‰¢a
! (2âŠ¸-â‰1 â‰¡ {2-ğ•©}â‰1) 10â€¿10â¥Šâ†•100
! (-âŸœ2â‰1 â‰¡ {ğ•©-2}â‰1) 10â€¿10â¥Šâ†•100
%USE k â‹„ nâ†1 â‹„ â‰ {ğ•Š: (â€¢Repr a) ! (â‰¡â‰n â‰¡ â‰¡_kâ‰n)Â´ aâ†(âŠâŸœ(3â€¿2â€¿2â¥Š'a'+â†•26))Â¨ <Ë˜ 2â€¿2â€¿2â€¿2â€¢rand.Range 3}Â¨ â†•1000
%USE k â‹„ nâ†2 â‹„ â‰ {ğ•Š: (â€¢Repr a) ! (â‰¡â‰n â‰¡ â‰¡_kâ‰n)Â´ aâ†(âŠâŸœ(3â€¿2â€¿2â¥Š'a'+â†•26))Â¨ <Ë˜ 2â€¿2â€¿2â€¿2â€¢rand.Range 3}Â¨ â†•1000
%USE k â‹„ nâ†3 â‹„ â‰ {ğ•Š: (â€¢Repr a) ! (â‰¡â‰n â‰¡ â‰¡_kâ‰n)Â´ aâ†(âŠâŸœ(3â€¿2â€¿2â¥Š'a'+â†•26))Â¨ <Ë˜ 2â€¿2â€¿2â€¿2â€¢rand.Range 3}Â¨ â†•1000
%USE eqvar â‹„ âŸ¨1, 0Ã·0âŸ© â‰¡â‰1 _eqvar 10â€¿2â¥Š1â€¿0â€¿1âˆ¾0Ã·0 %% 10â¥Š0
%USE eqvar â‹„ (10â€¿2â¥Š1â€¿0Ã·0) â‰¡â‰1 _eqvar 10â€¿2â¥Š1â€¿0â€¿1â€¿Â¯1Ã·0 %% 10â¥Š0
(10â€¿1â¥Š1â€¿0Ã·0) â‰¡â‰1 10â€¿1â¥Š1â€¿1â€¿0â€¿0Ã·0 %% 10â¥Š1â€¿0â€¿0â€¿0
â‰ {ğ•Šk: ! (3âŠ¸â†‘â‰k â‰¡ {3â†‘ğ•©}â‰k) 2â€¿2â€¿2â€¿2â¥Šâ†•16}Â¨ Â¯2+â†•10
â‰ {ğ•Šk: ! (1âŠ¸â†“â‰k â‰¡ {1â†“ğ•©}â‰k) 3â€¿3â€¿3â€¿3â¥Šâ†•81}Â¨ Â¯2+â†•10

!"Ë˜: Result rank too large" % (0âˆ¾254â¥Š2)âŠ¸â¥Šâˆ˜1Ë˜ 0â€¿2â¥Š1
!"â‰: Result rank too large" % (0âˆ¾254â¥Š2)âŠ¸â¥Šâˆ˜1â‰Â¯1 0â€¿2â¥Š1
!"â‰: Result rank too large" % (1â¥ŠËœ 0âˆ¾204â¥Š2)â‰50 1â¥ŠËœ 0âˆ¾100â¥Š2
!"ğ”½â‰ğ•˜: Result rank too large (204 â‰¡ =ğ•©, 200 â‰¡ =ğ”½v)" % {ğ•Š:(200â¥Š1)â¥Š1}â‰1 (205â¥Š1)â¥Š1

!"ğ•¨â‰ğ•©: Argument frames don't agree (âŸ¨3âŸ© â‰¡ â‰¢ğ•¨, âŸ¨2âŸ© â‰¡ â‰¢ğ•©, common frame of 1 axes)" % "abc" âŠ¢â‰0 "ab"
!"ğ•¨Ë˜ğ•©: Argument frames don't agree (âŸ¨3âŸ© â‰¡ â‰¢ğ•¨, âŸ¨2âŸ© â‰¡ â‰¢ğ•©, common frame of 1 axes)" % "abc" âŠ¢Ë˜ "ab"
! âˆ§Â´{ğ•Š: ! (âˆ¾â‰¡{ğ•¨âˆ¾ğ•©}Â´) (<â€¢rand.Rangeâˆ˜â‰ âŠ¸âŠ‘ âŸ¨"ab",1â€¿2,âŸ¨âŸ©,â†•0,""âŸ©) âˆ¾Ëœ (4â€¢rand.Rangeâ‰ )âŠ¸âŠ âŸ¨1, {â‡}, 'a', <'a', <{â‡}, "ab", â†•0, ""âŸ©}Â¨â†•10000

# error cases that could be affected by special code
!"âˆ§ğ•©: ğ•© cannot have rank 0" % âˆ§Ë˜â†•2
!"âˆ¨ğ•©: ğ•© cannot have rank 0" % âˆ¨Ë˜"a"
!"Expected non-negative integer, got Â¯3" % 2â€¿Â¯3/â‰1 6â€¿2â¥Š0
!"ğ•¨/ğ•©: Lengths of components of ğ•¨ must match ğ•© (3 â‰  4)" % 1â€¿2â€¿3âŠ¸/Ë˜â‰4â€¿5â€¿6â€¿7
!"ğ•¨/ğ•©: Simple ğ•¨ must have rank 0 or 1 (2â‰¡=ğ•¨)" % (2â€¿3â€¿1â¥Šâ†•4) /Ë˜ â†•2
!"ğ•¨/ğ•©: Length of compound ğ•¨ must be at most rank of ğ•©" % (<â†•0)/Ë˜â—‹(5âŠ¸â¥Š)<"ab"
!"ğ•¨âŠğ•©: Indexing out-of-bounds (24âˆŠğ•¨, 4â‰¡â‰ ğ•©)" % 1â€¿24âŠâ‰1â†•4â€¿4
!"ğ•¨âŠğ•©: Indexing out-of-bounds (4âˆŠğ•¨, 4â‰¡â‰ ğ•©)" % âŠâ‰1Ëœ6â€¿4â¥Šâ†•24
!"ğ•¨âŠğ•©: ğ•¨ must be an array of numbers or list of such arrays" % 0â€¿@â€¿Â¯1âŠâ‰1 5â€¿2â¥Š0.5
!"Expected integer, got Â¯5.25" % Â¯5.25âŠË˜âˆ˜â€¿4â¥Šâ†•24
!"ğ•¨âŠğ•©: Indexing out-of-bounds (1âˆŠğ•¨, 1â‰¡â‰ ğ•©)" % 0â€¿0â€¿1 âŠË˜â—‹(â‰Ë˜) 10000Ã—â†•3
!"ğ•¨âŠğ•©: ğ•© cannot be a unit" % 0âŠË˜5â¥Š<"a"
!"ğ•¨âŠğ•©: ğ•© cannot be a unit" % (3â€¿0â¥ŠâŸ¨âŸ©)âŠË˜â†•3
!"Expected integer, got 0.1" % 0.1âŠ‘Ë˜3â€¿5â¥Šâ†•15
!"ğ•¨âŠ‘ğ•©: ğ•© must be a list when ğ•¨ is a number (3â€¿4 â‰¡ â‰¢ğ•©)" % 5 âŠ‘Ë˜ â†•2â€¿3â€¿4
!"ğ•¨âŠ‘ğ•©: ğ•© must be a list when ğ•¨ is a number (3â€¿4 â‰¡ â‰¢ğ•©)" % 5 âŠ‘Ë˜ 2â€¿3â€¿4â¥Š2
!"ğ•¨âŠ‘ğ•©: ğ•© must be a list when ğ•¨ is a number (3â€¿4 â‰¡ â‰¢ğ•©)" % 0 âŠ‘â‰2 2â€¿3â€¿4â¥Š2
!">ğ•©: Result rank too large (80 â‰¡ =ğ•©, 205 â‰¡ =âŠ‘ğ•©)" % >â‰80 (200â¥Š1)â¥Š<(205â¥Š1)â¥Š1
!"ğ”½â‰ğ•˜: Result rank too large (195 â‰¡ =ğ•©, 210 â‰¡ =ğ”½v)" % >â‰5 (200â¥Š1)â¥Š<(205â¥Š1)â¥Š1
!"ğ•¨âˆ¾ğ•©: Lengths not matchable (âŸ¨6âŸ© â‰¡ â‰¢ğ•¨, 1â€¿1 â‰¡ â‰¢ğ•©)" % ("abc"âˆ¾"def")âˆ¾Ë˜â—‹(3/â‰)â‰"a"
!"ğ•¨âˆ¾ğ•©: Argument ranks must differ by 1 or less (0â‰¡=ğ•¨, 2â‰¡=ğ•©)" % 1âˆ¾Ë˜â†•3â€¿3â€¿3
!"ğ•¨âˆ¾ğ•©: Lengths not matchable (4â€¿2 â‰¡ â‰¢ğ•¨, 3â€¿3 â‰¡ â‰¢ğ•©)" % (3â€¿4â€¿2â¥Š4)âˆ¾Ë˜3â€¿3â€¿3â¥Š5
!"ğ•¨â‰ğ•©: ğ•¨ and ğ•© must have equal shapes (3â€¿4 â‰¡ â‰¢ğ•¨, 3â€¿3 â‰¡ â‰¢ğ•©)" % (â†•3â€¿4)â‰â‰2 2â€¿3â€¿3â¥Šâ†•18
!"â‰ğ•©: Result rank too large (255â‰¡=ğ•©)" % â‰â‰âˆ 0â¥ŠËœ255â¥Š1
!"shift: Lengths not matchable (âŸ¨6âŸ© â‰¡ â‰¢ğ•¨, 1â€¿1 â‰¡ â‰¢ğ•©)" % ("abc"âˆ¾"def")Â«Ë˜â—‹(3/â‰)â‰"a"
!"shift: =ğ•¨ must be =ğ•© or Â¯1+=ğ•© (0â‰¡=ğ•¨, 2â‰¡=ğ•©)" % 1Â«Ë˜â†•2â€¿2â€¿2
!"Â»ğ•©: ğ•© cannot be a scalar" % Â»â‰0 2â€¿3â€¿1â¥Šâ†•6
!"âŒ½ğ•©: ğ•© cannot be a unit" % âŒ½Ë˜â†•10
!"Expected integer, got 1.5" % 1.5â†‘Ë˜â†•2â€¿3â€¿2
!"ğ•¨â†‘ğ•©: ğ•¨ must have rank at most 1 (1â€¿2 â‰¡ â‰¢ğ•¨)" % (â‰1â€¿2)âŠ¸â†‘Ë˜â†•2â€¿3â€¿2
!"ğ•¨â†“ğ•©: ğ•¨ must have rank at most 1 (4â€¿2 â‰¡ â‰¢ğ•¨)" % (4â€¿2â¥Šâ†•8)â†“Ë˜â—‹â‰@
!"Integer out of range: 1e20" % 1e20âŒ½Ë˜3â€¿10â¥Š10
!"Expected number" % 3â€¿4â€¿@âŒ½Ë˜â†•3â€¿4
!"Expected integer, got 0.5" % 0.5âŠ¸âŒ½Ë˜4â€¿3â¥Šâ†•12
!"â†‘ğ•©: ğ•© must have rank at least 1" % â†‘Ë˜â†•2
!"â†“ğ•©: ğ•© must have rank at least 1" % â†“â‰0 2â€¿1â¥Š0
!"âŠğ•©: ğ•© cannot have rank 0" % âŠË˜"abcd"
!"âŠ’ğ•©: ğ•© cannot have rank 0" % âŠ’Ë˜"abcd"
!"âˆŠğ•©: ğ•© cannot have rank 0" % âˆŠË˜"abcd"
!"ğ•¨â‹ğ•©: ğ•¨ must be sorted" % 0â€¿2â€¿1âŠ¸â‹Ë˜ 3â€¿4â¥Šâ†•12
!"ğ•¨ğ”½`ğ•©: Shape of ğ•¨ must match the cell of ğ•© (âŸ¨2âŸ© â‰¡ â‰¢ğ•¨, 2â€¿3 â‰¡ â‰¢ğ•©)" % (2â€¿2â¥Š1)+`Ë˜2â€¿2â€¿3â¥Š0.4
!"ğ•¨ğ”½`ğ•©: Shape of ğ•¨ must match the cell of ğ•© (âŸ¨âŸ© â‰¡ â‰¢ğ•¨, 3â€¿3 â‰¡ â‰¢ğ•©)" % 2+`Ë˜â†•3â€¿3â€¿3
!"ğ”½Â´ğ•©: ğ•© must be a list (3â€¿3 â‰¡ â‰¢ğ•©)" % +Â´Ë˜2â€¿3â€¿3â¥Šâ†•18
!"ğ•¨ğ”½Â´ğ•©: ğ•© must be a list (3â€¿3 â‰¡ â‰¢ğ•©)" % 1+Â´Ë˜2â€¿3â€¿3â¥Šâ†•18
!"ğ”½Ëğ•©: ğ•© must have rank at least 1" % +ËË˜Ë˜10â€¿10â¥Šâ†•100
!"ğ”½Ëğ•©: ğ•© must have rank at least 1" % âˆ¾Ëâ‰Â¯2 2â€¿3â¥Š9

{âˆ¾ËË˜ â¥ŠâŸœ(â†•Ã—Â´) 2+â†•ğ•©}Â¨ 2â€¿3â€¿4â€¿5 %% â¥ŠâŸœ(â†•Ã—Â´)Â¨   âŸ¨2â€¿3,2â€¿12,2â€¿12â€¿5,2â€¿12â€¿5â€¿6âŸ©
{âˆ¾ËË˜ (2+â†•ğ•©)â¥Š<"hi"}Â¨ 2â€¿3â€¿4â€¿5 %% â¥ŠâŸœ(<"hi")Â¨ âŸ¨2â€¿3,2â€¿12,2â€¿12â€¿5,2â€¿12â€¿5â€¿6âŸ©
{âˆ¾Ëâ‰Â¯2 â¥ŠâŸœ(â†•Ã—Â´) 2+â†•ğ•©}Â¨ 3â€¿4â€¿5 %% â¥ŠâŸœ(â†•Ã—Â´)Â¨ âŸ¨2â€¿3â€¿4,2â€¿3â€¿20,2â€¿3â€¿20â€¿6âŸ©

%DEF tcc %USE pk â‹„ %USE var â‹„ _tcc_ â† { ! âˆ§Â´ (<ğ•¨ ğ”½_pkâ‰ğ•˜âŠ'e' ğ•©) â‰¡Â¨ (ğ•¨ ğ”½â‰ğ•˜âŠ'e'VâŸœğ•©)Â¨ "i"LVğ•©}
%USE tcc â‹„ âŸ¨2, 20, Â¯2, Â¯20, 0âŸ© {ğ•¨ â†‘_tcc_ Â¯1 ğ•© â‹„ ğ•¨ â†“_tcc_ Â¯1 ğ•©}âŒœ âŸ¨<4, â†•5, 4â€¿5â¥Šâ†•20, 4â€¿5â€¿6â¥Šâ†•120âŸ©
%USE tcc â‹„ âŸ¨âŒ½, â‰, âŠ, <, â‰, â¥Š, (â†•0)âŠ¸âŠ, (â†•1)âŠ¸âŠ, (â†•2)âŠ¸âŠâŸ© {ğ• _tcc_ Â¯1 ğ•© â‹„ ğ• _tcc_ 1 ğ•© â‹„ ğ• _tcc_ 2 ğ•©}âŒœ âŸ¨<4, â†•5, 4â€¿5â¥Šâ†•20, 4â€¿5â€¿6â¥Šâ†•120, 2â€¿3â€¿4â€¿5â¥Šâ†•120, 10â€¿0â¥Š0, 0â€¿10â¥Š0, 0â€¿2â€¿3â¥Š0, 2â€¿3â€¿4â€¿0â¥Š0âŸ©
%USE tcc â‹„ âŠ_tcc_ Â¯1 4â€¿2â¥Šâ†•8 â‹„ 1âŠ_tcc_ Â¯1 4â€¿2â¥Šâ†•8 â‹„ âŠ_tcc_ Â¯1 â†•4â€¿2 â‹„ 1âŠ_tcc_ Â¯1 â†•4â€¿2
%USE tcc â‹„ âŠ‘_tcc_ Â¯1 4â€¿2â¥Šâ†•8 â‹„ 1âŠ‘_tcc_ Â¯1 4â€¿2â¥Šâ†•8 â‹„ âŠ‘_tcc_ Â¯1 â†•4â€¿2 â‹„ 1âŠ‘_tcc_ Â¯1 â†•4â€¿2

1âŠ¸âŠË˜ 0â€¿2â€¿3â€¿4â¥Š2 %% 0â€¿3â€¿4â¥Š0 %!HEAPVERIFY
2âŠ¸âŠË˜ 0â€¿2â€¿2â€¿2â¥Š2 %% â†•0
âŠ‘â‰Â¯1 2â€¿3â€¿4â¥Šâ†•24 %% 2â¥Š3Ã—4Ã—â†•2
âŠ‘â‰Â¯2 2â€¿3â€¿4â¥Šâ†•24 %% 2â€¿3â¥Š4Ã—â†•6
âŠ‘â‰Â¯3 2â€¿3â€¿4â¥Šâ†•24 %% 2â€¿3â€¿4â¥Šâ†•24
0âŠ¸âŠ‘â‰1 2â€¿3â€¿4â¥Šâ†•24 %% 2â€¿3â¥Š4Ã—â†•6
1âŠ¸âŠ‘â‰1 2â€¿3â€¿4â¥Šâ†•24 %% 1+2â€¿3â¥Š4Ã—â†•6
âŠ‘â‰0 10â€¿10â¥Šâ†•100 %% 10â€¿10â¥Šâ†•100

%USE eqvar â‹„ 0â€¿0â€¿0â€¿0 {ğ•¨âŠ¸âŠË˜ğ•©}_eqvar â‰Ë˜â†•5 %% 5â€¿4â¥ŠâŒŠ4Ã·Ëœâ†•20
%USE eqvar â‹„ 0â€¿Â¯1â€¿0â€¿Â¯1 {ğ•¨âŠ¸âŠË˜ğ•©}_eqvar â‰Ë˜â†•5 %% 5â€¿4â¥ŠâŒŠ4Ã·Ëœâ†•20
%USE eqvar â‹„ 100â€¿Â¯3 {ğ•¨âŠ¸âŠË˜ğ•©}_eqvar 10â€¿200â¥Šâ†•2000 %% 10â€¿2â¥Š100â€¿197â€¿300â€¿397â€¿500â€¿597â€¿700â€¿797â€¿900â€¿997â€¿1100â€¿1197â€¿1300â€¿1397â€¿1500â€¿1597â€¿1700â€¿1797â€¿1900â€¿1997
%USE eqvar â‹„ 100â€¿50 {ğ•¨âŠ¸âŠË˜ğ•©}_eqvar 10â€¿200â¥Šâ†•2000 %% 10â€¿2â¥Š100â€¿50â€¿300â€¿250â€¿500â€¿450â€¿700â€¿650â€¿900â€¿850â€¿1100â€¿1050â€¿1300â€¿1250â€¿1500â€¿1450â€¿1700â€¿1650â€¿1900â€¿1850
%USE eqvar â‹„ Â¯1â€¿Â¯2â€¿Â¯3 {ğ•¨âŠ¸âŠË˜ğ•©}_eqvar 8â€¿80â¥Šâ†•557 %% 8â€¿3â¥Š79â€¿78â€¿77â€¿159â€¿158â€¿157â€¿239â€¿238â€¿237â€¿319â€¿318â€¿317â€¿399â€¿398â€¿397â€¿479â€¿478â€¿477â€¿2â€¿1â€¿0â€¿82â€¿81â€¿80
1â€¿2â€¿0â€¿1â€¿Â¯1âŠ¸âŠâ‰1 2â€¿3â€¿4â¥Šâ†•24 %% 2â€¿3â€¿5â¥Š1â€¿2â€¿0â€¿1â€¿3â€¿5â€¿6â€¿4â€¿5â€¿7â€¿9â€¿10â€¿8â€¿9â€¿11â€¿13â€¿14â€¿12â€¿13â€¿15â€¿17â€¿18â€¿16â€¿17â€¿19â€¿21â€¿22â€¿20â€¿21â€¿23
1â€¿2â€¿0â€¿1â€¿Â¯1âŠ¸âŠâ‰2 2â€¿3â€¿4â¥Šâ†•24 %% 2â€¿5â€¿4â¥Š4â€¿5â€¿6â€¿7â€¿8â€¿9â€¿10â€¿11â€¿0â€¿1â€¿2â€¿3â€¿4â€¿5â€¿6â€¿7â€¿8â€¿9â€¿10â€¿11â€¿16â€¿17â€¿18â€¿19â€¿20â€¿21â€¿22â€¿23â€¿12â€¿13â€¿14â€¿15â€¿16â€¿17â€¿18â€¿19â€¿20â€¿21â€¿22â€¿23
!"ğ•¨âŠğ•©: Indexing out-of-bounds (1âˆŠğ•¨, 1â‰¡â‰ ğ•©)" % %USE evar â‹„ 0â€¿Â¯1â€¿1â€¿Â¯1 {ğ•¨âŠ¸âŠË˜ğ•©}_evar â‰Ë˜â†•5
!"ğ•¨âŠğ•©: Indexing out-of-bounds (Â¯2âˆŠğ•¨, 1â‰¡â‰ ğ•©)" % %USE evar â‹„ 0â€¿Â¯1â€¿Â¯2â€¿Â¯1 {ğ•¨âŠ¸âŠË˜ğ•©}_evar â‰Ë˜â†•5
!"ğ•¨âŠğ•©: Indexing out-of-bounds (Â¯129âˆŠğ•¨, 128â‰¡â‰ ğ•©)" % %USE evar â‹„ 10â€¿Â¯129 {ğ•¨âŠ¸âŠË˜ğ•©}_evar 10â€¿128â¥Š1
!"ğ•¨âŠğ•©: Indexing out-of-bounds (128âˆŠğ•¨, 128â‰¡â‰ ğ•©)" % %USE evar â‹„ 10â€¿128 {ğ•¨âŠ¸âŠË˜ğ•©}_evar 10â€¿128â¥Š1
!"ğ•¨âŠğ•©: Indexing out-of-bounds (1âˆŠğ•¨, 1â‰¡â‰ ğ•©)" % %USE evar â‹„ 1â€¿0â€¿0â€¿1 {ğ•¨âŠ¸âŠË˜ğ•©}_evar 10â€¿1â¥Š1
!"ğ•¨âŠğ•©: Indexing out-of-bounds (1000âˆŠğ•¨, 3â‰¡â‰ ğ•©)" % %USE evar â‹„ (3â¥Š1000) {ğ•¨âŠ¸âŠË˜ğ•©}_evar 100â€¿3â¥Š1
!"ğ•¨âŠğ•©: Indexing out-of-bounds (1000âˆŠğ•¨, 4â‰¡â‰ ğ•©)" % %USE evar â‹„ (4â¥Š1000) {ğ•¨âŠ¸âŠË˜ğ•©}_evar 100â€¿4â¥Š1
!"ğ•¨âŠğ•©: Indexing out-of-bounds (1000âˆŠğ•¨, 8â‰¡â‰ ğ•©)" % %USE evar â‹„ (8â¥Š1000) {ğ•¨âŠ¸âŠË˜ğ•©}_evar 100â€¿8â¥Š1
!"ğ•¨âŠğ•©: Indexing out-of-bounds (100âˆŠğ•¨, 8â‰¡â‰ ğ•©)" % %USE evar â‹„ (<100) {ğ•¨âŠ¸âŠË˜ğ•©}_evar 100â€¿8â¥Š1
!"Integer out of range: 9e99" % %USE evar â‹„ (<9e99) {ğ•¨âŠ¸âŠË˜ğ•©}_evar 100â€¿8â¥Š1
âŸ¨1â€¿2âŸ©âŠ¸âŠË˜ 10â€¿8â¥Šâ†•100 %% (8Ã—â†•10) +âŒœ 1â€¿2
âŸ¨1â€¿2âŸ©âŠ¸âŠË˜ 10â€¿4â€¿2â¥Šâ†•100 %% (8Ã—â†•10) +âŒœ [2â€¿3,4â€¿5]
âŸ¨1â€¿2,âŸ¨1,0âŸ©âŸ©âŠ¸âŠË˜ 10â€¿4â€¿2â¥Šâ†•100 %% (8Ã—â†•10) +âŒœ [3â€¿2,5â€¿4]
[2â€¿1,4â€¿5]âŠ¸âŠË˜ 10â€¿8â¥Šâ†•100 %% (8Ã—â†•10) +âŒœ [2â€¿1,4â€¿5]
[1â€¿1,0â€¿1]âŠ¸âŠË˜ 10â€¿2â€¿2â¥Šâ†•100 %% (4Ã—â†•10) +âŒœ 2â€¿2â€¿2â¥Š2â€¿3â€¿2â€¿3â€¿0â€¿1â€¿2â€¿3
%USE eqvar â‹„ [2â€¿1â€¿3,4â€¿5â€¿7] {ğ•¨âŠ¸âŠË˜ ğ•©}_eqvar 10â€¿8â¥Šâ†•100 %% (8Ã—â†•10) +âŒœ [2â€¿1â€¿3,4â€¿5â€¿7]
%USE eqvar â‹„ [2â€¿1â€¿3,4â€¿5â€¿7] {ğ•¨âŠ¸âŠâ‰1ğ•©}_eqvar 3â€¿4â€¿8â¥Šâ†•100 %% (3â€¿4â¥Š8Ã—â†•12) +âŒœ [2â€¿1â€¿3,4â€¿5â€¿7]
%USE eqvar â‹„ [2â€¿1â€¿3,4â€¿5â€¿7] {ğ•¨âŠ¸âŠË˜ ğ•©}_eqvar 1â€¿8â¥Šâ†•100 %% â‰[2â€¿1â€¿3,4â€¿5â€¿7]
%USE eqvar â‹„ (<2) {ğ•¨âŠ¸âŠË˜ğ•©}_eqvar 10â€¿8â¥Šâ†•100 %% 2 + 8Ã—â†•10

â‰â¼Ë˜ 10â€¿1â¥Šâ†•10 %% â†•10
â‰â¼Ë˜ 10â€¿1â€¿3â¥Šâ†•30 %% 10â€¿3â¥Šâ†•30
â‰â¼Ë˜ 10â€¿1â€¿3â€¿2â¥Šâ†•60 %% 10â€¿3â€¿2â¥Šâ†•60
â‰â¼â‰Â¯2 4â€¿2â€¿1â¥Šâ†•8 %% 4â€¿2â¥Šâ†•8
â‰â¼â‰Â¯2 4â€¿2â€¿1â€¿3â¥Šâ†•24 %% 4â€¿2â€¿3â¥Šâ†•24
â‰â¼â‰Â¯2 4â€¿2â€¿1â€¿3â€¿2â¥Šâ†•48 %% 4â€¿2â€¿3â€¿2â¥Šâ†•48
â‰â¼â‰1 â‹ˆ"foo" %% <"foo"
â‰â¼â‰1 â‹ˆ10 %% <10
!"â‰â¼ğ•©: Argument must have a leading axis of 1" % â‰â¼Ë˜ 1â€¿10â¥Š2
!"â‰â¼ğ•©: Argument must have a leading axis of 1" % â‰â¼â‰Â¯2 1â€¿1â€¿2â€¿1â€¿1â¥Š1
!"â‰â¼ğ•©: Argument must have a leading axis of 1" % â‰â¼â‰Â¯2 1â€¿1â¥Š10
!"â‰â¼ğ•©: Argument must have a leading axis of 1" % â‰â¼â‰0 â‹ˆ10

%USE eqvar â‹„ (100â¥Š5â†‘1) â‰Ë˜_eqvar 100â¥Š7â†‘1 %% 0=(â†•100) |ËœâŒœ 5â€¿7
%USE eqvar â‹„ ('a'+100â¥Šâ†•5) â‰Ë˜_eqvar 100â¥Šâ†•7 %% 'a'â€¿0 +â‰1 (â†•100) |ËœâŒœ 5â€¿7
%USE eqvar â‹„   1âŠ¸(â‰Ë˜)_eqvar 100â¥Š7â†‘1 %% 100â€¿2â¥Š (    Â¬2|â†•200) âŒˆ 2/0=7|â†•100
%USE eqvar â‹„ 1e9âŠ¸(â‰Ë˜)_eqvar 100â¥Š7â†‘1 %% 100â€¿2â¥Š (1e9Ã—Â¬2|â†•200) âŒˆ 2/0=7|â†•100
%USE eqvar â‹„  â‰Ë˜âŸœ  1 _eqvar 100â¥Š7â†‘1 %% 100â€¿2â¥Š (     2|â†•200) âŒˆ 2/0=7|â†•100
%USE eqvar â‹„  â‰Ë˜âŸœ1e9 _eqvar 100â¥Š7â†‘1 %% 100â€¿2â¥Š (1e9Ã— 2|â†•200) âŒˆ 2/0=7|â†•100
%USE eqvar â‹„  â‰Ë˜âŸœ'!' _eqvar 100â¥Š7â†‘1 %% âˆ¾âŸœ'!'â—‹â€¢internal.KeepË˜ 0=7|â†•100
%USE eqvar â‹„ â‰Ë˜_eqvarËœ 3â€¿3â¥Šâ†•9 %% 3â€¿2â€¿3â¥Š0â€¿1â€¿2â€¿0â€¿1â€¿2â€¿3â€¿4â€¿5â€¿3â€¿4â€¿5â€¿6â€¿7â€¿8â€¿6â€¿7â€¿8
%USE eqvar â‹„ (2â€¿3â€¿4â€¿5â€¿1â¥Šâ†•11) â‰â‰2 _eqvar 2â€¿3â€¿4â€¿5â€¿1â¥Šâ†•7 %% (2â€¿3â€¿4â€¿5â€¿1â¥Šâ†•11) â‰â—‹â€¢internal.PureKeepâ‰2 2â€¿3â€¿4â€¿5â€¿1â¥Šâ†•7
!"ğ•¨Ë˜ğ•©: Argument frames don't agree (3â€¿4 â‰¡ â‰¢ğ•¨, 5â€¿4 â‰¡ â‰¢ğ•©, common frame of 1 axes)" % (3â€¿4â¥Š2) â‰Ë˜ 5â€¿4â¥Š2
!"ğ•¨â‰ğ•©: ğ•¨ and ğ•© must have equal shapes (âŸ¨4âŸ© â‰¡ â‰¢ğ•¨, âŸ¨5âŸ© â‰¡ â‰¢ğ•©)" % (3â€¿4â¥Š2) â‰Ë˜ 3â€¿5â¥Š2
!"ğ•¨â‰ğ•©: ğ•¨ and ğ•© must have equal shapes (2â€¿2â€¿2 â‰¡ â‰¢ğ•¨, 2â€¿3â€¿2 â‰¡ â‰¢ğ•©)" % (3â€¿2â€¿2â€¿2â¥Š2) â‰Ë˜ 3â€¿2â€¿3â€¿2â¥Š2
!"ğ•¨â‰ğ•©: ğ•¨ and ğ•© must have equal shapes (4â€¿1 â‰¡ â‰¢ğ•¨, âŸ¨4âŸ© â‰¡ â‰¢ğ•©)" % (3â€¿4â€¿1â¥Š0) â‰Ë˜ 3â€¿4â¥Š0
(<"ab") â‰Ë˜  2â¥Š"cd" %% 2â€¿2â¥ŠâŸ¨"ab", 'c', "ab", 'd'âŸ©
(<"ab") â‰Ë˜Ëœ 2â¥Š"cd" %% 2â€¿2â¥ŠâŸ¨'c', "ab", 'd', "ab"âŸ©
"ab" â‰â‰1 4â€¿2â¥Š"cd" %% 4â€¿2â€¿2â¥Š"abcdabcdabcdabcd"
!"ğ•¨â‰ğ•©: ğ•¨ and ğ•© must have equal shapes (âŸ¨âŸ© â‰¡ â‰¢ğ•¨, âŸ¨2âŸ© â‰¡ â‰¢ğ•©)" % â‰âŸœ"ab"Ë˜ "cd"
!"ğ•¨â‰ğ•©: ğ•¨ and ğ•© must have equal shapes (âŸ¨2âŸ© â‰¡ â‰¢ğ•¨, âŸ¨âŸ© â‰¡ â‰¢ğ•©)" % "ab"âŠ¸â‰Ë˜ "cd"

(
  %USE IS_HEAPVERIFY
  # big ËË˜ & `Ë˜ tester
  _basicArgs â† { Test _ğ•£ ranks:
    {ğ•Šf: {{f Test 0â€¿1â¥ŠËœ ğ•©âŠ0â€¿2â€¿4â€¿8â€¿32}Â¨ â†•ğ•©â¥Š3 â‹„ 1}Â¨ ranks}Â¨ +â€¿âˆ§â€¿âˆ¨â€¿=â€¿â‰ â€¿âŠ£â€¿âŠ¢
  }
  
  # w F _thing x tests F _thingâ‰w x
  _testFoldCells â† {âˆ¨Â´ğ•—=âŠ¢â€¿âŠ£? 0=Ã—Â´(-ğ•¨)â†‘â‰¢ğ•©? 1; heapverify? 0=â‰ â¥Šğ•©? 1 âŠ£ ğ”½Ëâ‰ğ•¨ ğ•©; ! (ğ”½Ëâ‰ğ•¨  â‰¡ ğ”½Ëâ—‹â€¢internal.PureKeepâ‰ğ•¨) ğ•©}
  _testScanCells â† {                         heapverify? 0=â‰ â¥Šğ•©? 1 âŠ£ ğ”½`â‰ğ•¨ ğ•©; ! (ğ”½`â‰ğ•¨  â‰¡ ğ”½`â—‹â€¢internal.PureKeepâ‰ğ•¨) ğ•©}
  
  {1 ğ•¨ _testFoldCells ğ•©} _basicArgs 2â€¿3â€¿4
  {1 ğ•¨ _testScanCells ğ•©} _basicArgs 2â€¿3â€¿4
  {2 ğ•¨ _testScanCells ğ•©} _basicArgs 3â€¿4
  {2 ğ•¨ _testScanCells ğ•©} _basicArgs 3â€¿4
  
  âŸ¨0, 0â€¿1, 1â€¿0, 2â€¿2, 1, 10, 10â€¿1, 1â€¿10, 30âŸ© {
    ğ•¨â€¿ğ•© â¥ŠÂ¨â†©
    sh â† ğ•¨âˆ¾ğ•©
    cr â† â‰ ğ•©
    +â€¿âˆ§â€¿âˆ¨â€¿=â€¿â‰ â€¿âŠ£â€¿âŠ¢ {
      cr ğ• _testFoldCells ğ•©
      cr ğ• _testScanCells ğ•©
    }âŒœ {0=Ã—Â´sh? ğ•©; âˆ¾âŸ¨ğ•©, Â¬âŒ¾âŠ‘Â¨ ğ•©, Â¬âŒ¾(Â¯1âŠ‘â¥Š)Â¨ ğ•©âŸ©} shâŠ¸â¥ŠÂ¨ 0â€¿1
  }âŒœ âŸ¨0, 1, 2, 8, 32, 8â€¿1, 4â€¿8, 4â€¿2, 59, 60, 63, 80, 81, 200, 640, 641âŸ©
)
